---
title: FreeCodeCamp 高级算法题 - 验证美国电话号
date: 2017-07-18 21:21:47
tags: [FreeCodeCamp,高级,算法]
categories: FCC
---

# 验证美国电话号 (Validate US Telephone Numbers)

## 题目链接
- [中文链接](https://freecodecamp.cn/challenges/validate-us-telephone-numbers)
- [英文链接](https://freecodecamp.com/challenges/validate-us-telephone-numbers)

## 问题解释
- 这个 `function` 接收一个字符串参数 `str`，表示一个电话号码。返回值为 `Boolean`，表示这个 `str` 是否符合美国电话号码格式
- 如果 `str` 是 `555-555-5555`，那么应该返回 `true`，如果是 `555-55-555`，那么应该返回 `false`

<!--more-->

# 解题思路
高级算法第一题，但这道题和算法无关，只是正则的事儿。那我们就先来分析一下题目要求，看看正则该如何写。请在想思路之前再好好读一遍题目说明，以及底下的测试用例

另外，如果你不熟悉正则表达式，建议打开 MDN [RegExp](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp) 页面，对照着看

先推荐一个网站，[regex101](https://regex101.com/)。我一直在用这个调试正则

- 通过观察例子，我们得出一个结论，美国电话号码是十位的，事实上也确实如此。当然，十位都得是数字=。=
    - 这一步的正则可以写成 `^\d{10}$`。可以思考一下，为什么要加上 `^` 和 `$`
- 额外地，我们可以在前面加上国家码 `1`，但在这道题目中，不加也是可以的，但不能加上其他数字。也就是说，`1` 要么出现在开头，总长度为 `11`，否则总长度为 `10`
    - 这一步的正则更新为 `^1?\d{10}$`。其中，`1?` 代表的是 `1` 的出现次数为 `0` 或 `1` 次
- 仔细观察一下例子，只有一种情况，`5555555555` 十个 `5` 是连着写的，其他情况，都是按照 `三个数 三个数 四个数` 分为三组。那么我们把这三组在正则中也分一下，只要不影响十个 `5` 的那种情况判断
    - 这一步正则更新为 `^1?\d{3}\d{3}\d{4}$`。显然，十个 `5` 那种情况，也符合这个正则表达式
- 考虑到如果开头存在 `1`，那么这个 `1` 之后可以有一个空格，也可以没有
    - 因此，正则更新为 `^1?\s?\d{3}\d{3}\d{4}$`
- 分组之后，就要考虑组与组之间连接符的可能了。例子中总共有三种情况，分别是空格，`-` 和**什么都没有**。但要注意，不存在既有 `-` 又有空格的情况。所以，这个只需要写成 `(\s|-)?`
- 连接符位置可以存在于第一组与第二组之间，也可以存在于第二组和第三组之间
    - 这一步正则可以更新为 `^1?\s?\d{3}(\s|-)?\d{3}(\s|-)?\d{4}$`
